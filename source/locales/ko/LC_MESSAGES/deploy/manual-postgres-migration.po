# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2015-2025 Mattermost
# This file is distributed under the same license as the Mattermost package.
# FIRST AUTHOR <EMAIL@ADDRESS>, 2025.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: Mattermost \n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-05-07 15:09+0900\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language: ko\n"
"Language-Team: ko <LL@li.org>\n"
"Plural-Forms: nplurals=1; plural=0;\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Generated-By: Babel 2.15.0\n"

#: ../../source/deploy/manual-postgres-migration.rst:2
msgid "Manually migrate from MySQL to PostgreSQL"
msgstr ""

#: ../../source/_static/badges/allplans-selfhosted.rst:7
msgid "|plans-img| Available on `all plans <https://mattermost.com/pricing/>`__"
msgstr ""

#: ../../<rst_prolog>:2
msgid "plans-img"
msgstr ""

#: ../../source/_static/badges/allplans-selfhosted.rst:9
msgid ""
"|deployment-img| `self-hosted <https://mattermost.com/download/>`__ "
"deployments"
msgstr ""

#: ../../<rst_prolog>:4
msgid "deployment-img"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:7
msgid ""
"Migrating a MySQL database to PostgreSQL manually involves the following "
"steps:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:9
msgid "`install recommended tools <#tool-recommendations>`__"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:10
msgid ""
"`familiarize yourself with system requirements and configurations "
"<#system-requirements-and-configurations-for-manual-migrations>`__"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:11
msgid "`ensure migration prerequisites are met <#before-a-manual-migration>`__"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:12
msgid "`review schema differences <#schema-diffs>`__"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:13
msgid "`prepare a target database <#prepare-target-database>`__"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:14
msgid "`migrate the data <#migrate-the-data>`__"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:15
msgid "`complete post-migration wrap-up activities <#after-the-migration>`__"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:19
msgid ""
"See the `plugin migrations <#plugin-migrations>`__ section for details on"
" migrating collaborative playbooks and Boards."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:21
msgid ""
"Not sure upgrading manually is the right path forward? Mattermost "
"customers looking for tailored guidance based on their Mattermost "
"deployment can contact a `Mattermost Expert <https://mattermost.com"
"/contact-sales/>`_."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:24
msgid "Tool recommendations"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:26
msgid ""
"If you prefer to migrate to Postgres manually, we recommend the following"
" tools for the migration process:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:28
msgid "`pgloader <#pgloader>`__"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:29
msgid "`morph <#morph>`__"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:30
msgid "`dbcmp (optional) <#dbcmp-optional>`__"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:32
msgid ""
"This page includes instructions on how to install each of these tools, "
"and then proceed with the database migration."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:34
msgid ""
"Once you've installed the necessary tools, review the `system "
"requirements and configurations <#system-requirements-and-"
"configurations>`__ documentation, and know what's required `before "
"starting your migration <#before-the-migration>`__ to prepare for your "
"migration."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:36
msgid ""
"Start your migration by `preparing your target database <#prepare-target-"
"database>`__, then `migrate the data <#migrate-the-data>`__, and complete"
" all `post-migration steps <#after-the-migration>`__."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:38
msgid ""
"See the `plugin migrations <#plugin-migrations>`__ documentation for "
"details on migrating collaborative playbooks and boards."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:41
msgid "pgloader"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:43
msgid "Use the ``pgloader`` tool to migrate your data from MySQL to PostgreSQL."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:46
msgid "Install pgloader"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:48
msgid ""
"To install ``pgloader``, see the official `installation guide "
"<https://pgloader.readthedocs.io/en/latest/install.html>`_."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:52
msgid ""
"If you are using MySQL v8: Due to a `known bug "
"<https://github.com/dimitri/pgloader/issues/1183>`_ in pgloader-compiled "
"binaries, you need to compile pgloader from the source. Please follow the"
" steps `here <https://pgloader.readthedocs.io/en/latest/install.html"
"#build-from-sources>`_ to build from the source."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:54
msgid ""
"Alternatively, you may want to use our ``mattermost-pgloader`` Docker "
"image to avoid installing or building ``pgloader``. See the documentation"
" below for details."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:57
msgid "Use pgloader"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:60
msgid "Pull the Docker image and verify pgloader"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:62
msgid ""
"For a manual migration, run the following command to pull the "
"``mattermost-pgloader`` image and verify that pgloader is working "
"correctly:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:68
msgid ""
"This command pulls the ``mattermost/mattermost-pgloader:latest`` image "
"and runs ``pgloader`` to check its version and ensure it works as "
"expected."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:71
msgid "Map local directory"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:73
msgid ""
"Use the ``-v $(pwd):/home/migration`` flag to map your current working "
"directory to the Docker container. This allows you to use your local "
"directory for storing logs and other files."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:76
msgid "Set network configuration"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:78
msgid ""
"Depending on your network requirements, set the ``--network`` flag "
"accordingly. For example, to access localhost, you need to set the "
"network to ``host``."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:81
msgid "morph"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:83
msgid "The ``morph`` tool creates the PostgreSQL schema."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:87
msgid ""
"Both ``morph`` and ``dbcmp`` requires Go toolchain. To install Go "
"compiler, follow the `Go documentation <https://go.dev/doc/install>`_."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:90
msgid "Install morph"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:92
msgid "You can install morph CLI by running the following command:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:99
msgid "dbcmp (Optional)"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:101
msgid ""
"The ``dbcmp`` tool enables you to compare the data following the "
"migration by comparing every table and reporting whether there is a "
"diversion between two schemas."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:104
msgid "Install dbcmp"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:106
msgid ""
"You can install `dbcmp <https://github.com/mattermost/dbcmp>`_ by running"
" the following command:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:113
msgid "System requirements and configurations for manual migrations"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:115
msgid ""
"Before starting a manual migration process, it's essential to ensure that"
" your system meets the necessary requirements for a smooth and efficient "
"migration. We strongly recommend the following system specifications and "
"adjustments:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:117
msgid ""
"Ensure you have enough system memory resources. 16GB of RAM is "
"recommended as a default. In scenarios where system memory is "
"insufficient, users can fine-tune pgloader settings, such as the ``number"
" of workers``, ``prefetch rows``, and especially ``rows per range`` if "
"``concurrency`` is set above ``1``. These adjustments can help optimize "
"resource utilization based on available system resources. For further "
"detail see `pgloader documentation "
"<https://pgloader.readthedocs.io/en/latest/batches.html>`_."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:118
msgid ""
"A multi-core processor with sufficient processing power is recommended "
"for the migration process, especially when dealing with large datasets."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:119
msgid ""
"Ensure that there is enough disk space available for storing both the "
"MySQL and PostgreSQL databases, as well as any temporary files generated "
"during the migration process. The amount of required disk space depends "
"on the size of the databases being migrated."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:120
msgid ""
"To reduce migration time further, users may choose to manually drop "
"indexes on the target PostgreSQL database before initiating the migration"
" process. This approach can potentially accelerate the migration by "
"reducing overhead with index builds during data insertion."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:123
msgid "Before a manual migration"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:127
msgid ""
"This guide requires a schema of v7.1 ESR or later. So, if you have an "
"earlier version and planning to migrate, please update your Mattermost "
"Server to v7.1 at a minimum. See the :ref:`extended support releases "
"<about/release-policy:extended support releases>` documentation for "
"details."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:129
msgid "Back up your MySQL data."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:130
msgid "Confirm your Mattermost version. See the **About** modal for details."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:131
msgid ""
"Schedule the migration window. This process requires you to stop the "
"Mattermost Server during the migration."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:132
msgid ""
"See the `schema-diffs <#schema-diffs>`__ section to ensure data "
"compatibility between schemas."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:133
msgid ""
"Prepare your PostgreSQL environment by creating a database and user. See "
"the :doc:`database </deploy/server/preparations>` documentation for "
"details."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:134
msgid ""
"On `newer versions <https://www.postgresql.org/docs/release/15.0/>`_ of "
"PostgreSQL, newly created users do not have access to ``public`` schema. "
"The access should be explicitly granted by running ``GRANT ALL ON SCHEMA "
"public to mmuser``."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:137
msgid "Schema diffs"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:139
msgid ""
"Before the manual migration, due to differences between the two schemas, "
"some manual steps may be required for an error-free migration."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:142
msgid "Text to character varying"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:144
msgid ""
"We encourage you to check if the sizes are consistent within the "
"PostgreSQL schema limits since the Mattermost MySQL schema uses the "
"``text`` column type in the various tables instead of ``varchar`` "
"representation in the PostgreSQL schema."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:146
msgid ""
"You can check if there are any required deletions or updates. For "
"example, to do so in the ``Audits`` table/``Action`` column; run:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:152
msgid ""
"The following table shows the deletions or updates you can proceed with "
"that don't incur further consequences."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:155
#: ../../source/deploy/manual-postgres-migration.rst:174
msgid "Table"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:155
#: ../../source/deploy/manual-postgres-migration.rst:174
msgid "Column"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:155
#: ../../source/deploy/manual-postgres-migration.rst:174
msgid "Data type casting"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:155
#: ../../source/deploy/manual-postgres-migration.rst:174
msgid "Consequence on deletion"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:157
#: ../../source/deploy/manual-postgres-migration.rst:158
msgid "Audits"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:157
msgid "Action"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:157
#: ../../source/deploy/manual-postgres-migration.rst:159
#: ../../source/deploy/manual-postgres-migration.rst:163
#: ../../source/deploy/manual-postgres-migration.rst:176
#: ../../source/deploy/manual-postgres-migration.rst:178
#: ../../source/deploy/manual-postgres-migration.rst:179
#: ../../source/deploy/manual-postgres-migration.rst:180
#: ../../source/deploy/manual-postgres-migration.rst:184
#: ../../source/deploy/manual-postgres-migration.rst:185
#: ../../source/deploy/manual-postgres-migration.rst:187
msgid "text -> varchar(512)"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:157
#: ../../source/deploy/manual-postgres-migration.rst:158
#: ../../source/deploy/manual-postgres-migration.rst:159
msgid ""
"No side effect on how the application works (The affected row needs to be"
" deleted)."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:158
msgid "ExtraInfo"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:158
#: ../../source/deploy/manual-postgres-migration.rst:160
#: ../../source/deploy/manual-postgres-migration.rst:161
#: ../../source/deploy/manual-postgres-migration.rst:162
#: ../../source/deploy/manual-postgres-migration.rst:164
#: ../../source/deploy/manual-postgres-migration.rst:177
msgid "text -> varchar(1024)"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:159
msgid "ClusterDiscovery"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:159
msgid "HostName"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:160
#: ../../source/deploy/manual-postgres-migration.rst:161
#: ../../source/deploy/manual-postgres-migration.rst:162
msgid "Commands"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:160
msgid "IconURL"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:160
msgid "The field can be deleted or updated with a new URL."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:161
msgid "AutoCompleteDesc"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:161
#: ../../source/deploy/manual-postgres-migration.rst:162
msgid "The field can be deleted or rewritten."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:162
msgid "AutoCompleteHint"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:163
#: ../../source/deploy/manual-postgres-migration.rst:184
msgid "RemoteClusters"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:163
msgid "Topics"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:163
msgid "The field can be removed."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:164
msgid "Systems"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:164
msgid "Value"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:164
msgid "Edge case, ideally should never happen."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:167
msgid ""
"The following table shows several occurrences where the schema can differ"
" and data size constraints within the PostgreSQL schema can result in "
"errors. Each table/row requires individual inspection hence we added the "
"possible consequence of deletion."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:171
msgid ""
"Several reports have been received from our community that the "
"``LinkMetadata`` and ``FileInfo`` tables had some overflows, so we "
"recommend checking these tables in particular. Please check if your data "
"in the MySQL schema exceeds these limitations."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:176
#: ../../source/deploy/manual-postgres-migration.rst:177
msgid "Compliances"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:176
msgid "Keywords"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:176
#: ../../source/deploy/manual-postgres-migration.rst:177
msgid "The filter for compliance needs to be updated."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:177
msgid "Emails"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:178
#: ../../source/deploy/manual-postgres-migration.rst:179
#: ../../source/deploy/manual-postgres-migration.rst:180
#: ../../source/deploy/manual-postgres-migration.rst:181
#: ../../source/deploy/manual-postgres-migration.rst:182
msgid "FileInfo"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:178
#: ../../source/deploy/manual-postgres-migration.rst:187
msgid "Path"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:178
#: ../../source/deploy/manual-postgres-migration.rst:179
#: ../../source/deploy/manual-postgres-migration.rst:180
#: ../../source/deploy/manual-postgres-migration.rst:181
#: ../../source/deploy/manual-postgres-migration.rst:182
#: ../../source/deploy/manual-postgres-migration.rst:183
msgid ""
"Previous links to this file won't work (The affected row needs to be "
"deleted)."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:179
msgid "ThumbnailPath"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:180
msgid "PreviewPath"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:181
msgid "Name"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:181
#: ../../source/deploy/manual-postgres-migration.rst:182
#: ../../source/deploy/manual-postgres-migration.rst:186
msgid "text -> varchar(256)"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:182
msgid "MimeType"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:183
msgid "LinkMetadata"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:183
msgid "URL"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:183
msgid "text -> varchar(2048)"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:184
msgid "SiteURL"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:184
msgid ""
"Previous remote cluster will be removed (The affected row needs to be "
"deleted)."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:185
msgid "Sessions"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:185
msgid "DeviceId"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:185
msgid ""
"Users will be logged out on these devices (The affected row needs to be "
"deleted)."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:186
#: ../../source/deploy/manual-postgres-migration.rst:187
msgid "UploadSessions"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:186
msgid "FileName"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:186
#: ../../source/deploy/manual-postgres-migration.rst:187
msgid "The upload session will be lost (The affected row needs to be deleted)."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:191
msgid "Full-text indexes"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:193
msgid ""
"It's possible that some words in the ``Posts`` and ``FileInfo`` tables "
"can exceed the `limits of the maximum token length "
"<https://www.postgresql.org/docs/11/textsearch-limitations.html>`_ for "
"full-text search indexing. In these cases, we are dropping the "
"``idx_posts_message_txt`` and ``idx_fileinfo_content_txt`` indexes from "
"the PostgreSQL schema, and creating these indexes after the migration by "
"running the following queries:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:195
msgid ""
"To prevent errors during the migration, we have included following "
"queries:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:203
msgid "Unsupported unicode sequences"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:205
msgid ""
"There is a specific unicode sequence that is `disallowed "
"<https://www.postgresql.org/docs/16/datatype-json.html#DATATYPE-JSON>`_ "
"in PostgreSQL which is ``\\u0000``. There is a chance that this sequence "
"may appear in several rows across a bunch of tables in your MySQL "
"database. If it is the case, during the migration you will likely receive"
" an error as following: ``unsupported Unicode escape sequence: \\u0000 "
"cannot be converted to text.``. To prevent this from happening, we advise"
" to sanitize your data before starting to the migration. You can use the "
"following query to replace ``\\u0000`` sequence with empty string."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:209
msgid ""
"You can use this query as-is in a script, or you may need to set the "
"delimiter to something else (e.g., ``DELIMITER //``) when defining it in "
"the MySQL console. Once you are done defining the procedure, please set "
"the delimiter back to the original (i.e., ``DELIMITER ;``)."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:245
msgid ""
"There is also a specific byte sequence value that is not allowed and will"
" cause an ``invalid byte sequence for encoding 'UTF8': 0x00\"`` error "
"during the migration. To prevent this error, you can add the ``remove-"
"null-characters`` clause to the text casting rules. However, since "
"pgloader will modify the data on the fly, there may be differences "
"between the tables (if any are affected) during the comparison phase."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:248
msgid "Artifacts may remain from previous configurations/versions"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:250
msgid ""
"Prior to ``v6.4``, Mattermost was using `golang-migrate "
"<https://github.com/golang-migrate/migrate>`_ to handle the schema "
"migrations. Since we don't use it anymore, we exclude the table "
"``schema_migrations``. If you were using Mattermost before ``v6.4`` "
"consider dropping this table and excluding it from comparison as well."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:256
msgid ""
"Some community members have reported that they had ``description`` and "
"``nextsyncat`` columns in their ``SharedChannelRemotes`` table. These "
"columns should be removed from the table. Consider running the following "
"DDL to drop the columns. (This migration will be added to future versions"
" of Mattermost)."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:262
msgid ""
"An error has been identified in the 96th migration that was previously "
"released. Before proceeding with the migration, it is necessary to remove"
" a specific column. To ensure the Threads table reaches the expected "
"state, execute the following prepared statement:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:282
msgid "Configuration in database"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:284
msgid ""
"If you were previously utilizing a database for handling the "
":doc:`Mattermost configuration </configure/configuration-in-your-"
"database>`, those tables will not be migrated from your MySQL database "
"with the migration `script <#migrate-the-data>`__."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:286
msgid "Two migrations are necessary:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:288
msgid "migrate database configuration to the file system"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:289
msgid "migrate file system configuration back to the database"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:292
msgid "Migrate database configuration to the file system"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:294
msgid ""
"Use the ``mmctl config migrate`` command to :ref:`migrate your config "
"<manage/mmctl-command-line-tool:mmctl config migrate>` to the file "
"system, as follows:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:300
msgid ""
"Where ``<DB_USER>``, ``<DB_PASS>``, ``<DB_HOST>``, and ``<DB_NAME>`` are "
"replaced with your environment values. Ensure you use ``--local`` when "
"running this command. The first parameters (``<DB_USER>``, ``<DB_PASS>``)"
" is the database the configuration is stored in, the second parameter "
"(``<DB_HOST>``, ``<DB_NAME>``) is the file we are saving the "
"configuration to."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:302
msgid ""
"In the configuration file, update the ``SqlSettings.DataSource`` and "
"``SqlSettings.DriverName`` fields to reflect new changes. To do so, open "
"the ``json`` file and change the respective fields."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:305
msgid "Migrate file system configuration back to the database"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:307
msgid ""
"To save configuration back to the database, Use the ``mmctl config "
"migrate`` command again and reverse the parameters. Ensure you use the "
"new database credentials moving it back to the target database."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:313
msgid ""
"You should update the ``SqlSettings.DataSource`` and "
"``SqlSettings.DriverName`` fields accordingly. Also, note that the "
"``MM_CONFIG`` environment variable should point to the new DSN after the "
"migration is completed."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:316
msgid "Prepare target database"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:318
msgid ""
"It is essential to create tables and indexes to ensure that the "
"PostgreSQL database schema is properly structured according to the "
"required specifications. Since Mattermost repository contains all of the "
"required SQL queries to achieve that, we can leverage this by running the"
" following steps:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:320
msgid "Clone the ``mattermost`` repository for your specific version:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:326
msgid ""
"Run all schema migrations* on your PostgreSQL database using morph CLI "
"with the following command:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:332
msgid ""
"\\* After ``v8``, due to project re-organization, the migrations "
"directory has been changed to "
"``./mattermost/server/channels/db/migrations/postgres/`` relative to "
"where you cloned Mattermost repository. Please set ``--path`` flag "
"accordingly."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:335
msgid "Migrate the data"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:337
msgid ""
"Once we set the schema to a desired state, we can start migrating the "
"**data** by running ``pgloader``"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:341
msgid ""
"In the example below, the hosts for both databases are assumed to be in "
"the same instance. Please update addresses accordingly if they are on "
"different machines. Also you can test the ``.load`` file by simply "
"running ``pgloader`` with ``--dry-run`` flag. For instance ``pgloader "
"--dry-run migration.load`` command."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:343
#: ../../source/deploy/manual-postgres-migration.rst:482
#: ../../source/deploy/manual-postgres-migration.rst:589
#: ../../source/deploy/manual-postgres-migration.rst:646
msgid "Use the following configuration for the baseline of the data migration:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:392
msgid ""
"Once you save this configuration file, e.g. ``migration.load``, you can "
"run the ``pgloader`` with the following command:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:398
msgid ""
"Feel free to contribute to and/or report your findings through your "
"migration to us."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:401
msgid "After the migration"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:404
msgid "Restore full-text indexes"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:406
msgid ""
"To avoid performance regression on ``Posts`` and ``FileInfo`` table "
"access, following queries should be executed once the migration finishes:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:415
msgid ""
"If any of the entries in your  ``Posts`` and ``FileInfo`` tables exceed "
"the limit mentioned above, index creation query will warn with the "
"``ERROR:  string is too long for tsvector`` log while trying to create "
"these indexes. This means the content that didn't fit into a ``tsvector``"
" was ignored. If you still want to index the truncated content, you can "
"use ``substring()`` function on the content while creating the indexes. "
"An example query is given below. If it continue to fail create the index "
"with the substring of the content, consider decreasing the value "
"gradually (Like to ``500000``) until the index is created successfully."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:422
msgid "Compare the data"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:424
msgid ""
"We developed an internal tool called ``dbcmp`` to simplify database "
"comparison. It checks every table in two databases and reports any "
"differences in their schemas. However, ``dbcmp`` does not compare "
"individual rows. Instead, it calculates checksum values based on a "
"specified page-size and compares them. This means it cannot generate row-"
"level diffs."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:426
msgid ""
"We recommend using ``dbcmp`` as an additional check to verify data "
"integrity, especially if custom casting rules (beyond the defaults or "
"those provided by us) were used during migration. Otherwise, running this"
" tool is not necessary."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:428
msgid "The tool includes a few flags to run a comparison:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:445
msgid ""
"``--exclude`` and ``--include`` flags are mutually exclusive and they "
"can't be used together."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:447
msgid "For our case, we can simply run the following command:"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:453
msgid ""
"An example command would look like: ``dbcmp --source "
"\"user:password@tcp(address:3306)/db_name --target "
"\"postgres://user:password@address:5432/db_name``"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:457
msgid ""
"``POSTGRES_DSN`` should start with a ``postgres://`` prefix. This way "
"``dbcmp`` decides which driver to use while connecting to a database."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:459
msgid ""
"Another exclusion we are making is in the ``db_migrations`` table which "
"has a small difference (a typo in a single migration name) and creates a "
"diff. Since we created the PostgreSQL schema with morph, and the official"
" ``mattermost`` source, we can skip it safely without concerns. On the "
"other hand, ``systems`` table may contain additional diffs if there were "
"extra keys added during some of the migrations. Consider excluding the "
"``systems`` table if you run into issues, and perform a manual comparison"
" as the data in the ``systems`` table is relatively smaller in size."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:463
msgid ""
"If the ``remove-null-characters`` transform function is utilized during "
"the migration and there were ``0x00`` byte sequences in the MySQL "
"database, those tables will have differences during the comparison phase."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:466
msgid "Restore the search path"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:468
msgid ""
"If you closely examine the ``pgloader`` configuration file (e.g., "
"``migration.load``), you will notice that the ``search_path`` of the "
"database user is set to ``public``. This is the only requirement for the "
"Mattermost application. However, if you need to include other schemas in "
"the search path, you should modify the ``search_path`` accordingly to "
"meet your specific requirements."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:471
msgid "Plugin migrations"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:473
msgid ""
"On the plugin side, we are going to take a different approach from what "
"we have done above. We are not going to use ``morph`` tool to create "
"tables and indexes this time. We are going to utilize ``pgloader`` to "
"create the tables on behalf of us. The reason for doing so is that "
"collaborative playbooks and boards leverage application logic to "
"facilitate SQL queries. But we don't want to use any level of application"
" at this point."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:476
msgid "Collaborative playbooks"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:478
msgid ""
"The ``pgloader`` configuration provided for playbooks is based on "
"``v1.38.1`` and the plugin should be at least ``v1.36.0`` to perform the "
"migration."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:480
#: ../../source/deploy/manual-postgres-migration.rst:587
#: ../../source/deploy/manual-postgres-migration.rst:644
msgid ""
"Once we are ready to migrate, we can start migrating the **schema** and "
"the **data**  by running ``pgloader``"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:583
msgid "Focalboard"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:585
msgid ""
"As of ``v9.0`` Boards will transition to being fully community supported "
"as the Focalboard plugin. Hence this guide covers only version "
"``v7.10.x`` of the schema. :ref:`Official announcement <about/deprecated-"
"features:mattermost server v9.0.0>`."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:640
msgid "Calls"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:642
msgid ""
"If you are running a version of Mattermost that is greater than ``v9.9`` "
"or the Calls plugin above ``v0.27``, you can opt to migrate the data for "
"the plugin. We are going to take a similar approach with Boards and "
"Playbooks migration and let pgloader create the tables."
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:685
msgid "Troubleshooting"
msgstr ""

#: ../../source/deploy/manual-postgres-migration.rst:687
msgid ""
"See :ref:`troubleshooting errors during migration from MySQL to "
"PostgreSQL <deploy/postgres-migration:troubleshooting>`"
msgstr ""

